<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>JVDT Game Arcade</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Inter', sans-serif; }
    .game-card { transition: transform 0.2s, box-shadow 0.2s; }
    .game-card:hover { transform: translateY(-5px); box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1),0 4px 6px -2px rgba(0,0,0,0.05);} 
    .btn-primary { background-color: #4f46e5; color: white; }
    .btn-primary:hover { background-color: #4338ca; }
    .btn-secondary { background-color: #e5e7eb; color: #374151; }
    .btn-secondary:hover { background-color: #d1d5db; }
    .modal-overlay { transition: opacity 0.3s; }
    .modal-content { transition: transform 0.3s; }
    .correct { background-color: #10b981 !important; color: white !important; }
    .incorrect { background-color: #ef4444 !important; color: white !important; }
    .disabled-key { background-color: #9ca3af; cursor: not-allowed; }
  </style>
</head>
<body class="bg-gray-50 text-gray-800">

<div id="app-container">
  <div id="arcade-view">
    <header class="bg-white shadow-sm">
      <div class="max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8">
        <h1 class="text-3xl font-bold leading-tight text-gray-900">JVDT Game Arcade</h1>
        <p class="mt-1 text-gray-600">Learn better through play. Select a game to begin.</p>
      </div>
    </header>
    <main>
      <div class="max-w-7xl mx-auto py-6 sm:px-6 lg:px-8">
        <div class="px-4 py-6 sm:px-0">
          <div id="game-selection-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
        </div>
      </div>
    </main>
  </div>
  <div id="game-modal" class="modal-overlay fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center p-4 hidden opacity-0">
    <div class="modal-content w-full max-w-2xl bg-white rounded-xl shadow-2xl transform scale-95 overflow-y-auto max-h-[90vh]">
      <div id="game-content" class="p-6 md:p-8"></div>
    </div>
  </div>
</div>
<script>
document.addEventListener('DOMContentLoaded', () => {
const app = {
arcadeView: document.getElementById('arcade-view'),
gameModal: document.getElementById('game-modal'),
gameContent: document.getElementById('game-content'),
gameSelectionGrid: document.getElementById('game-selection-grid'),
currentGame: null,
score: 0,
games: [
{
id: 'key-quest',
title: 'Key Quest',
description: 'A fast-paced quiz to test your knowledge.',
icon: 'â“',
color: 'bg-indigo-500',
jvdtKey: 'Association',
data: {
questions: [
{ q: "Which 'Key' focuses on connecting new info?", a: ['Association', 'Analysis', 'Root', 'Context'], correct: 0 },
{ q: "The 'Train Journey' ends at which station?", a: ['Integration', 'Comprehension', 'Application', 'Information'], correct: 2 },
{ q: "What does the C in CAGE stand for?", a: ['Communicate', 'Cultivate', 'Challenge', 'Context'], correct: 1 }
],
currentQuestion: 0,
timer: null,
timeLeft: 15,
}
},
{
id: 'word-weaver',
title: 'Word Weaver',
description: 'Guess the letters to uncover the hidden term before you run out of chances.',
icon: 'ðŸ•¸ï¸',
color: 'bg-purple-500',
jvdtKey: 'Analysis',
data: {
puzzles: [
{ word: 'CONTEXT', hint: 'The circumstances that form the setting for an event.' },
{ word: 'SCAFFOLDING', hint: 'Temporary support for a learner.' },
{ word: 'METACOGNITION', hint: 'Thinking about your own thinking.' }
],
currentPuzzle: 0,
guessedLetters: [],
mistakes: 0,
maxMistakes: 6
}
},
{
id: 'root-finder',
title: 'Root Finder',
description: 'Guess words built from the given root.',
icon: 'ðŸŒ³',
color: 'bg-green-500',
jvdtKey: 'Root',
data: {
puzzles: [
{ root: 'port', hint: 'To carry or move', words: ['import', 'export', 'report', 'support'] },
{ root: 'spect', hint: 'To see or look', words: ['inspect', 'respect', 'prospect', 'spectacle'] },
{ root: 'tract', hint: 'To pull or draw', words: ['attract', 'contract', 'distract', 'subtract'] }
],
currentPuzzle: 0,
foundWords: [],
}
},
{
id: 'context-detective',
title: 'Context Detective',
description: 'Place this event or quote in the right context!',
icon: 'ðŸ•µï¸',
color: 'bg-yellow-500',
jvdtKey: 'Context',
data: {
clues: [
{ item: "'I have a dream...'", context: 'MLK speech', options: ['1920s', '1960s', '1990s'], correct: 1 },
{ item: 'Invention of the Printing Press', context: 'Johannes Gutenberg', options: ['1440 Renaissance', '100 AD', '1820 Industrial'], correct: 0 }
],
currentClue: 0,
}
},
{
id: 'journey-builder',
title: 'Journey Builder',
description: 'Arrange the steps in the correct logical order.',
icon: 'ðŸš‚',
color: 'bg-blue-500',
jvdtKey: 'Analysis',
data: {
puzzles: [
{ title: 'JVDT Learning Journey', items: ['Application', 'Information', 'Comprehension', 'Integration'], correctOrder: ['Information', 'Integration', 'Comprehension', 'Application'] },
{ title: 'Scientific Method', items: ['Hypothesis', 'Experiment', 'Observation', 'Conclusion'], correctOrder: ['Observation', 'Hypothesis', 'Experiment', 'Conclusion'] }
],
currentPuzzle: 0,
userOrder: [],
}
},
{
id: 'association-web',
title: 'Association Web',
description: 'Visually connect ideas and build a map of your knowledge.',
icon: 'ðŸ§ ',
color: 'bg-pink-500',
jvdtKey: 'Association',
data: {
topic: 'Learning',
associations: [],
}
},
{
id: 'the-integrator',
title: 'The Integrator',
description: 'Create a powerful analogy to connect two seemingly unrelated concepts.',
icon: 'ðŸ”—',
color: 'bg-teal-500',
jvdtKey: 'Integration',
data: {
prompt: { item1: 'A tree\'s root system', item2: 'The "Root" Key in JVDT' }
}
},
{
id: 'cage-crisis-sim',
title: 'CAGE Crisis Sim',
description: 'Navigate a learning obstacle using the CAGE framework.',
icon: 'ðŸ§˜',
color: 'bg-orange-500',
jvdtKey: 'CAGE',
data: {
currentScene: 'start',
scenes: {
'start': { text: 'You are frustrated and distracted. What do you do?', choices: [{ text: 'Acknowledge feeling and refocus.', next: 'cultivate' }, { text: 'Ignore it.', next: 'ignore' }] },
'cultivate': { text: 'Good! You guide emotion and cultivate attention.', choices: [{ text: 'Finish', next: 'end' }] },
'ignore': { text: 'Frustration grows. Try again.', choices: [{ text: 'Try again', next: 'start' }] },
'end': { text: 'You successfully navigated the challenge!', choices: [] }
}
}
},
{
id: 'application-pitch',
title: 'Application Pitch',
description: 'Apply what you\'ve learned to solve a real-world problem.',
icon: 'ðŸ’¡',
color: 'bg-cyan-500',
jvdtKey: 'Application',
data: {
prompt: { concept: 'Scaffolding', problem: 'A student struggles to write an essay. How would you apply scaffolding?' }
}
},
{
id: 'teach-peace-dialogue',
title: 'Teach Peace Dialogue',
description: 'Navigate a difficult conversation using respectful discourse.',
icon: 'ðŸ•Šï¸',
color: 'bg-gray-500',
jvdtKey: 'Teach Peace',
data: {
currentScene: 'start',
scenes: {
'start': { text: 'A classmate disagrees with your idea. How do you respond?', choices: [{ text: 'Restate their point.', next: 'restate' }, { text: 'Argue your point.', next: 'argue' }] },
'restate': { text: 'You say, "So you\'re saying we should focus on Plan B?" The conversation becomes productive.', choices: [{ text: 'Finish', next: 'end' }] },
'argue': { text: 'The discussion gets heated and no progress is made.', choices: [{ text: 'Try again', next: 'start' }] },
'end': { text: 'You fostered a peaceful and productive dialogue!', choices: [] }
}
}
}
],
init() {
this.renderGameCards();
this.gameModal.addEventListener('click', (e) => {
if (e.target === this.gameModal) this.closeGame();
});
},
renderGameCards() {
this.gameSelectionGrid.innerHTML = this.games.map(game => `
<div class="game-card bg-white rounded-lg shadow-md p-6 flex flex-col cursor-pointer" onclick="app.startGame('${game.id}')">
  <div class="flex-grow">
    <div class="flex items-center">
      <div class="text-4xl mr-4">${game.icon}</div>
      <div>
        <h2 class="text-xl font-bold text-gray-900">${game.title}</h2>
        <span class="text-sm font-semibold ${game.color.replace('bg-', 'text-')} rounded-full px-2 py-0.5">${game.jvdtKey}</span>
      </div>
    </div>
    <p class="mt-4 text-gray-600">${game.description}</p>
  </div>
  <button class="mt-6 w-full text-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white ${game.color}">Play Game</button>
</div>
`).join('');
},
startGame(gameId) {
this.currentGame = this.games.find(g => g.id === gameId);
this.score = 0;
this.gameModal.classList.remove('hidden');
setTimeout(() => this.gameModal.classList.remove('opacity-0'), 10);
setTimeout(() => this.gameModal.querySelector('.modal-content').classList.remove('scale-95'), 10);
const gameStarters = {
  'key-quest': this.startKeyQuest,
  'word-weaver': this.startWordWeaver,
  'root-finder': this.startRootFinder,
  'context-detective': this.startContextDetective,
  'journey-builder': this.startJourneyBuilder,
  'association-web': this.startAssociationWeb,
  'the-integrator': this.startCreativePromptGame,
  'cage-crisis-sim': this.startBranchingNarrativeGame,
  'application-pitch': this.startCreativePromptGame,
  'teach-peace-dialogue': this.startBranchingNarrativeGame,
};
gameStarters[this.currentGame.id].call(this);
},
closeGame() {
if (this.currentGame && this.currentGame.id === 'key-quest') clearInterval(this.currentGame.data.timer);
this.gameModal.classList.add('opacity-0');
this.gameModal.querySelector('.modal-content').classList.add('scale-95');
setTimeout(() => {
  this.gameModal.classList.add('hidden');
  this.gameContent.innerHTML = '';
  this.currentGame = null;
}, 300);
},
showFinalScore(gameTitle) {
this.gameContent.innerHTML = `
<div class="text-center">
  <h2 class="text-2xl font-bold mb-2">Game Over!</h2>
  <p class="text-gray-600 mb-4">You completed ${gameTitle}.</p>
  <div class="my-8">
    <p class="text-lg">Final Score</p>
    <p class="text-6xl font-extrabold text-indigo-600">${this.score}</p>
  </div>
  <button onclick="app.closeGame()" class="w-full md:w-auto px-6 py-3 btn-primary rounded-lg">Back to Arcade</button>
</div>
`;
},
showCompletionMessage(gameTitle, message) {
this.gameContent.innerHTML = `
<div class="text-center">
  <h2 class="text-2xl font-bold mb-2">${gameTitle} Complete!</h2>
   <p class="text-3xl my-8">ðŸŽ‰</p>
  <p class="text-gray-700 mb-8">${message}</p>
  <button onclick="app.closeGame()" class="w-full md:w-auto px-6 py-3 btn-primary rounded-lg">Back to Arcade</button>
</div>
`;
},
// Key Quest
startKeyQuest() {
this.currentGame.data.currentQuestion = 0;
this.score = 0;
this.renderKeyQuestQuestion();
},
renderKeyQuestQuestion() {
const qData = this.currentGame.data;
const question = qData.questions[qData.currentQuestion];
if (!question) { this.showFinalScore('Key Quest'); return; }
this.gameContent.innerHTML = `
<div class="flex justify-between items-center mb-4">
  <h2 class="text-2xl font-bold">Key Quest</h2>
  <div id="kq-timer" class="text-xl font-bold bg-gray-200 rounded-full w-12 h-12 flex items-center justify-center">15</div>
</div>
<p class="text-lg text-gray-700 mb-6">${qData.currentQuestion + 1}. ${question.q}</p>
<div id="kq-options" class="grid grid-cols-1 md:grid-cols-2 gap-4">
  ${question.a.map((opt, i) => `<button data-index="${i}" class="kq-option text-left p-4 border-2 border-gray-300 rounded-lg hover:bg-gray-100">${opt}</button>`).join('')}
</div>
<div class="mt-6 text-right font-semibold">Score: <span id="kq-score">${this.score}</span></div>
`;
this.startKeyQuestTimer();
document.querySelectorAll('.kq-option').forEach(btn => btn.addEventListener('click', (e) => this.checkKeyQuestAnswer(e)));
},
startKeyQuestTimer() {
const qData = this.currentGame.data;
qData.timeLeft = 15;
const timerEl = document.getElementById('kq-timer');
timerEl.textContent = qData.timeLeft;
clearInterval(qData.timer);
qData.timer = setInterval(() => {
  qData.timeLeft--;
  timerEl.textContent = qData.timeLeft;
  if (qData.timeLeft <= 0) {
    clearInterval(qData.timer);
    this.checkKeyQuestAnswer(null);
  }
}, 1000);
},
checkKeyQuestAnswer(e) {
clearInterval(this.currentGame.data.timer);
const qData = this.currentGame.data;
const question = qData.questions[qData.currentQuestion];
const selectedIndex = e ? parseInt(e.target.dataset.index) : -1;
const options = document.querySelectorAll('.kq-option');
options.forEach((opt, i) => {
  opt.disabled = true;
  if (i === question.correct) opt.classList.add('correct');
  else if (i === selectedIndex) opt.classList.add('incorrect');
});
if (selectedIndex === question.correct) {
  this.score += 10 + qData.timeLeft;
  document.getElementById('kq-score').textContent = this.score;
}
qData.currentQuestion++;
setTimeout(() => this.renderKeyQuestQuestion(), 1500);
},
// Root Finder
startRootFinder() {
this.currentGame.data.currentPuzzle = 0;
this.renderRootFinderPuzzle();
},
renderRootFinderPuzzle() {
const pData = this.currentGame.data;
const puzzle = pData.puzzles[pData.currentPuzzle];
if (!puzzle) { this.showFinalScore('Root Finder'); return; }
pData.foundWords = [];
this.gameContent.innerHTML = `
<h2 class="text-2xl font-bold mb-2">Root Finder</h2>
<p class="text-gray-600 mb-4">The root is <strong class="text-indigo-600 font-semibold">'${puzzle.root}'</strong>. Hint: ${puzzle.hint}</p>
<div class="flex mb-4">
  <input type="text" id="rf-input" class="w-full px-4 py-2 border border-gray-300 rounded-l-md" placeholder="Type a word...">
  <button id="rf-submit" class="px-4 py-2 btn-primary rounded-r-md">Submit</button>
</div>
<div id="rf-feedback" class="h-6 mb-4 text-sm font-medium"></div>
<div id="rf-word-list" class="flex flex-wrap gap-2">
   ${puzzle.words.map(w => `<span class="px-3 py-1 bg-gray-200 text-gray-500 rounded-full">${'_'.repeat(w.length)}</span>`).join('')}
</div>
<button id="rf-next" class="mt-6 w-full py-2 px-4 btn-secondary rounded-md hidden">Next Puzzle</button>
`;
document.getElementById('rf-submit').addEventListener('click', () => this.checkRootFinderWord());
document.getElementById('rf-input').addEventListener('keyup', (e) => { if (e.key === 'Enter') this.checkRootFinderWord(); });
document.getElementById('rf-next').addEventListener('click', () => {
  this.currentGame.data.currentPuzzle++;
  this.renderRootFinderPuzzle();
});
},
checkRootFinderWord() {
const inputEl = document.getElementById('rf-input');
const feedbackEl = document.getElementById('rf-feedback');
const wordListEl = document.getElementById('rf-word-list');
const puzzle = this.currentGame.data.puzzles[this.currentGame.data.currentPuzzle];
const foundWords = this.currentGame.data.foundWords;
const guess = inputEl.value.trim().toLowerCase();
if (!guess) return;
if (puzzle.words.includes(guess) && !foundWords.includes(guess)) {
  foundWords.push(guess);
  this.score += 10;
  feedbackEl.textContent = 'Correct!';
  feedbackEl.className = 'h-6 mb-4 text-sm font-medium text-green-600';
} else if (foundWords.includes(guess)) {
  feedbackEl.textContent = 'Already found!';
  feedbackEl.className = 'h-6 mb-4 text-sm font-medium text-yellow-600';
} else {
  feedbackEl.textContent = 'Try again!';
  feedbackEl.className = 'h-6 mb-4 text-sm font-medium text-red-600';
}
inputEl.value = '';
inputEl.focus();
wordListEl.innerHTML = puzzle.words.map(w => 
  `<span class="px-3 py-1 rounded-full ${foundWords.includes(w) ? 'bg-green-100 text-green-800' : 'bg-gray-200 text-gray-500'}">
    ${foundWords.includes(w) ? w : '_'.repeat(w.length)}
  </span>`
).join('');
if (foundWords.length === puzzle.words.length) {
   document.getElementById('rf-next').classList.remove('hidden');
   feedbackEl.textContent = 'Puzzle Complete!';
   feedbackEl.className = 'h-6 mb-4 text-sm font-medium text-blue-600';
}
},
// Context Detective
startContextDetective() {
this.currentGame.data.currentClue = 0;
this.score = 0;
this.renderContextDetectiveClue();
},
renderContextDetectiveClue() {
const cData = this.currentGame.data;
const clue = cData.clues[cData.currentClue];
if (!clue) { this.showFinalScore('Context Detective'); return; }
this.gameContent.innerHTML = `
<h2 class="text-2xl font-bold">Context Detective</h2>
<p class="text-gray-600 mb-4">Where or when does this belong?</p>
<div class="bg-indigo-50 p-6 rounded-lg mb-6 text-center">
   <p class="text-xl italic font-medium text-indigo-800">"${clue.item}"</p>
   <p class="text-sm text-indigo-600 mt-2">${clue.context}</p>
</div>
<div id="cd-options" class="grid grid-cols-1 gap-4">
  ${clue.options.map((opt, i) => `<button data-index="${i}" class="cd-option text-left p-4 border-2 border-gray-300 rounded-lg hover:bg-gray-100">${opt}</button>`).join('')}
</div>
<div class="mt-6 text-right font-semibold">Score: <span id="cd-score">${this.score}</span></div>
`;
document.querySelectorAll('.cd-option').forEach(btn => btn.addEventListener('click', (e) => this.checkContextDetectiveAnswer(e)));
},
checkContextDetectiveAnswer(e) {
const cData = this.currentGame.data;
const clue = cData.clues[cData.currentClue];
const selectedIndex = parseInt(e.target.dataset.index);
const options = document.querySelectorAll('.cd-option');
options.forEach((opt, i) => {
  opt.disabled = true;
  if (i === clue.correct) opt.classList.add('correct');
  else if (i === selectedIndex) opt.classList.add('incorrect');
});
if (selectedIndex === clue.correct) {
  this.score += 25;
  document.getElementById('cd-score').textContent = this.score;
}
cData.currentClue++;
setTimeout(() => this.renderContextDetectiveClue(), 1500);
},
// Word Weaver (Hangman)
startWordWeaver() {
const gameData = this.currentGame.data;
gameData.currentPuzzle = Math.floor(Math.random() * gameData.puzzles.length);
gameData.guessedLetters = [];
gameData.mistakes = 0;
this.renderWordWeaver();
},
renderWordWeaver() {
const { puzzles, currentPuzzle, guessedLetters, mistakes, maxMistakes } = this.currentGame.data;
const puzzle = puzzles[currentPuzzle];
const wordState = puzzle.word.split('').map(letter => guessedLetters.includes(letter) ? letter : '_').join(' ');
this.gameContent.innerHTML = `
<h2 class="text-2xl font-bold">Word Weaver</h2>
<p class="text-gray-600 mb-4">Hint: ${puzzle.hint}</p>
<div class="my-6 text-center text-4xl tracking-[.2em] font-mono">${wordState}</div>
<p class="text-center mb-4">Mistakes: ${mistakes} / ${maxMistakes}</p>
<div id="ww-keyboard" class="flex flex-wrap justify-center gap-2">
  ${'ABCDEFGHIJKLMNOPQRSTUVWXYZ'.split('').map(key => `<button class="key-btn p-2 border rounded-md hover:bg-gray-200">${key}</button>`).join('')}
</div>
`;
document.querySelectorAll('#ww-keyboard button').forEach(btn => {
  if (guessedLetters.includes(btn.textContent)) {
    btn.disabled = true;
    btn.classList.add('disabled-key');
  }
  btn.addEventListener('click', () => this.handleWordWeaverGuess(btn.textContent));
});
},
handleWordWeaverGuess(letter) {
const gameData = this.currentGame.data;
gameData.guessedLetters.push(letter);
const puzzle = gameData.puzzles[gameData.currentPuzzle];
if (!puzzle.word.includes(letter)) {
  gameData.mistakes++;
}
const isWin = puzzle.word.split('').every(l => gameData.guessedLetters.includes(l));
const isLoss = gameData.mistakes >= gameData.maxMistakes;
if (isWin) {
  this.showCompletionMessage('Word Weaver', 'Excellent! You uncovered the word.');
} else if (isLoss) {
  this.showCompletionMessage('Word Weaver', `So close! The word was ${puzzle.word}.`);
} else {
  this.renderWordWeaver();
}
},
// Journey Builder
startJourneyBuilder() {
const gameData = this.currentGame.data;
gameData.currentPuzzle = 0;
gameData.userOrder = [];
this.renderJourneyBuilder();
},
renderJourneyBuilder() {
const { puzzles, currentPuzzle, userOrder } = this.currentGame.data;
const puzzle = puzzles[currentPuzzle];
const remainingItems = puzzle.items.filter(item => !userOrder.includes(item));
this.gameContent.innerHTML = `
<h2 class="text-2xl font-bold">${this.currentGame.title}</h2>
<p class="text-gray-600 mb-4">Arrange the following steps in the correct order: <strong>${puzzle.title}</strong></p>
<div class="min-h-[80px] bg-gray-100 rounded-lg p-4 mb-4 flex flex-wrap gap-2 items-center">
  ${userOrder.map((item, index) => `<span class="bg-indigo-100 text-indigo-800 px-3 py-1 rounded-full font-medium">${index + 1}. ${item}</span>`).join('')}
</div>
<div class="flex flex-wrap justify-center gap-3">
  ${remainingItems.map(item => `<button class="jb-item p-3 bg-white border-2 rounded-lg hover:border-indigo-500">${item}</button>`).join('')}
</div>
`;
document.querySelectorAll('.jb-item').forEach(btn => {
  btn.addEventListener('click', () => this.handleJourneyBuilderSelection(btn.textContent));
});
},
handleJourneyBuilderSelection(item) {
const gameData = this.currentGame.data;
gameData.userOrder.push(item);
if (gameData.userOrder.length === gameData.puzzles[gameData.currentPuzzle].items.length) {
  const isCorrect = JSON.stringify(gameData.userOrder) === JSON.stringify(gameData.puzzles[gameData.currentPuzzle].correctOrder);
  const message = isCorrect ? 'Perfect sequence! You\'ve built the journey correctly.' : 'Good try! The correct order has been revealed.';
  gameData.userOrder = gameData.puzzles[gameData.currentPuzzle].correctOrder;
  this.renderJourneyBuilder();
  setTimeout(() => this.showCompletionMessage(this.currentGame.title, message), 2000);
} else {
  this.renderJourneyBuilder();
}
},
// Association Web
startAssociationWeb() {
this.currentGame.data.associations = [];
this.renderAssociationWeb();
},
renderAssociationWeb() {
 this.gameContent.innerHTML = `
<h2 class="text-2xl font-bold">${this.currentGame.title}</h2>
<p class="text-gray-600 mb-4">Add concepts related to <strong>${this.currentGame.data.topic}</strong> to build your knowledge web.</p>
<div class="flex mb-6">
  <input type="text" id="aw-input" class="w-full px-4 py-2 border border-gray-300 rounded-l-md" placeholder="Add a related idea...">
  <button id="aw-submit" class="px-5 py-2 btn-primary rounded-r-md">Add</button>
</div>
<div id="aw-canvas" class="relative min-h-[250px] bg-gray-100 rounded-lg p-4 flex items-center justify-center flex-wrap gap-4">
  <div class="absolute bg-indigo-200 text-indigo-900 font-bold px-4 py-2 rounded-lg">${this.currentGame.data.topic}</div>
</div>
 <button onclick="app.showCompletionMessage('Association Web', 'Great work building those connections!')" class="mt-6 w-full py-2 px-4 btn-secondary rounded-md">I'm Done</button>
`;
document.getElementById('aw-submit').addEventListener('click', () => this.addAssociation());
document.getElementById('aw-input').addEventListener('keyup', (e) => { if (e.key === 'Enter') this.addAssociation(); });
},
addAssociation() {
const inputEl = document.getElementById('aw-input');
const canvasEl = document.getElementById('aw-canvas');
const term = inputEl.value.trim();
if (term) {
  const termEl = document.createElement('span');
  termEl.className = 'bg-white shadow-sm px-3 py-1 rounded-full';
  termEl.textContent = term;
  canvasEl.appendChild(termEl);
  this.currentGame.data.associations.push(term);
  inputEl.value = '';
  inputEl.focus();
}
},
// Creative Prompt Games (Integrator, Application Pitch)
startCreativePromptGame() {
const { title, data } = this.currentGame;
let promptHtml = '';
if (data.prompt.item1) {
   promptHtml = `<p class="text-gray-600 mb-4">How can you connect these two ideas?</p>
    <div class="flex justify-around text-center mb-6">
      <div class="w-1/2 p-4 bg-gray-100 rounded-lg"><p>${data.prompt.item1}</p></div>
      <div class="flex items-center text-2xl font-bold text-indigo-500 p-2">ðŸ”—</div>
      <div class="w-1/2 p-4 bg-gray-100 rounded-lg"><p>${data.prompt.item2}</p></div>
    </div>`;
} else {
  promptHtml = `<p class="text-gray-600 mb-2"><strong>Concept:</strong> ${data.prompt.concept}</p>
          <p class="text-gray-600 mb-4"><strong>Problem:</strong> ${data.prompt.problem}</p>`;
}
this.gameContent.innerHTML = `
<h2 class="text-2xl font-bold">${title}</h2>
${promptHtml}
<textarea id="cp-textarea" class="w-full h-32 p-3 border rounded-md" placeholder="Write your response here..."></textarea>
<button onclick="app.showCompletionMessage('${title}', 'Excellent creative thinking!')" class="mt-4 w-full py-2 btn-primary rounded-md">Submit</button>
`;
},
// Branching Narrative Games (CAGE, Teach Peace)
startBranchingNarrativeGame() {
this.currentGame.data.currentScene = 'start';
this.renderBranchingNarrativeScene();
},
renderBranchingNarrativeScene() {
const { title, data } = this.currentGame;
const scene = data.scenes[data.currentScene];
if (!scene) return;
this.gameContent.innerHTML = `
<h2 class="text-2xl font-bold">${title}</h2>
<div class="bg-gray-100 p-6 my-6 rounded-lg">
   <p class="text-lg text-gray-800">${scene.text}</p>
</div>
<div class="grid grid-cols-1 gap-4">
  ${scene.choices.map(choice => `<button data-next="${choice.next}" class="bn-choice text-left p-4 border-2 rounded-lg hover:bg-gray-100">${choice.text}</button>`).join('')}
</div>
`;
if (scene.choices.length === 0) {
   setTimeout(() => this.showCompletionMessage(title, scene.text), 1000);
}
document.querySelectorAll('.bn-choice').forEach(btn => {
  btn.addEventListener('click', () => {
    this.currentGame.data.currentScene = btn.dataset.next;
    this.renderBranchingNarrativeScene();
  });
});
}
};
app.init();
window.app = app;
});
</script>
</body>
</html>